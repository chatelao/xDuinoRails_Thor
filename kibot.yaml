kibot:
  version: 1

preflight:
  # Der Schlüsselname bestimmt die Art der Prüfung (hier ERC)
  erc:
    enabled: false
    # Optionen für ERC falls nötig, z.B. um Warnungen als Fehler zu werten:
    # warnings_as_errors: true 
    
  # Der Schlüsselname bestimmt die Art der Prüfung (hier DRC)
  drc:
    enabled: false
    # Optionen für DRC
    # ignore_unconnected: false
    
outputs:
  - name: 'Run_Simulation'
    comment: 'Führt die Ngspice-Simulation aus und speichert Plots'
    type: simulation
    dir: 'gen_docs/sim'
    options:
      wbk: 'rails_signal_feedback_dcc-railcom-8x50.wbk'
      format: PNG
      # Optional: Nur bestimmte Plots exportieren
      # plots: ['Transient Analysis', 'AC Analysis']

  - name: 'PDF_Schaltplan'
    comment: 'Erzeugt ein PDF des Schaltplans'
    type: pdf_sch_print
    dir: 'gen_docs'

  # 2. Interaktive Stückliste (Extrem nützlich!)
  - name: 'Interaktive_BOM'
    type: ibom
    dir: 'gen_docs'
    options:
      dark_mode: true

  # 3. PCB-Layout als PDF (Alle Lagen)
  - name: 'PCB_Layout'
    type: pcb_print
    dir: 'gen_docs'
    options:
      pages:
        - layers: [F.Cu, F.SilkS, F.Mask]
          sheet: 'Top Side'
        - layers: [B.Cu, B.SilkS, B.Mask]
          sheet: 'Bottom Side'

  # 4. 3D-Modell (STEP)
  - name: '3D_Modell'
    type: step
    dir: 'gen_docs/3D'

  # 5. 3D-Renders (Bilder für README)
  - name: 'Render_Top'
    type: render_3d
    dir: 'gen_docs'
    options:
      view: top
  - name: 'Render_Bottom'
    type: render_3d
    dir: 'gen_docs'
    options:
      view: bottom

  - name: 'Gerber_Dateien'
    comment: 'Erzeugt Gerber-Daten für die Fertigung'
    type: gerber
    dir: 'gen_docs/CAM'
    options:
      use_protel_extensions: true    

  - name: 'Bohr_Dateien'
    comment: 'Erzeugt Excellon-Bohrdateien'
    type: excellon
    dir: 'gen_docs/CAM'

  - name: 'Stueckliste_BOM'
    comment: 'Erzeugt eine Stückliste im CSV-Format'
    type: bom
    dir: 'gen_docs/CAM'
    options:
      format: CSV
      columns:
        - field: 'Reference'
          name: 'Designator'
        - field: 'Value'
          name: 'Value'
        - field: 'Footprint'
          name: 'Package'
        - field: 'LCSC' # Falls Sie ein Custom-Feld "LCSC" für Bauteilnummern haben
          name: 'LCSC Part #'
        - field: 'Quantity'
          name: 'Quantity'

  - name: 'position_files'
    comment: 'Positionsdateien für die Bestückung (Pick & Place)'
    type: position
    dir: 'gen_docs/CAM'
    options:
      format: 'CSV'
      units: 'millimeters'
      separate_files_for_front_and_back: true
      columns:
        - id: Ref
          name: Designator
        - id: PosX
          name: "Mid X"
        - id: PosY
          name: "Mid Y"
        - id: Side
          name: Layer
        - id: Rot
          name: Rotation
